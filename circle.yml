machine:
  node:
    version: 5.1.0
  environment:
    CI_AUTOMATE_PROJECT: $CIRCLE_SHA1
    CI_AUTOMATE_BUILD: Build No. $CIRCLE_BUILD_NUM for $CIRCLE_SHA1
test:
  override:
  # Inetractions with jQuery
  - gulp test:phantomjs --once
  - gulp test:phantomjs --once --jquery
  # - gulp test:phantomjs --once --jquery3
  # ^^^ Fails
  # DOM node disposal If jQuery is referenced, should clear jQuery data when a node is cleaned FAILED
  # The problem is `jQuery.cleanData` does not appear to work as expected ATM.
  - gulp test:phantomjs --once --jquery3-compat
  # Multiple Browsers
  - gulp test:sauce --chrome
  - sleep 10 && gulp test:sauce --firefox
  - sleep 10 && gulp test:sauce --ios
  - sleep 10 && gulp test:sauce --safari
  - sleep 10 && gulp test:sauce --android
  - sleep 10 && gulp test:sauce --ie
general:
  branches:
    ignore:
    - gh-pages # list of branches to ignore
notify:
# Don't forget to set COVERALLS_PARALLEL=true
  webhooks:
    - url: https://coveralls.io/webhook?repo_token=$COVERALLS_REPO_TOKEN
